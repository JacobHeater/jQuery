!function(t){t.fn.maxChars=function(e){var r=t(".char-counter-container").filter('[target-control-id="'+this.prop("id")+'"]');if(r.length>0)return this;var n=t.extend({max:500,trim:!0,countDirection:1,separator:"/",align:2,autoTruncate:!0,text:"Characters Used",colors:{low:"#00A835",lowmid:"#97A800",mid:"#BFAF30",midhigh:"#E08300",high:"#FF0000"},onMaxChars:function(t){},offMaxChars:function(t){}},e||{}),o="number"==typeof n.max?n.max:parseInt(n.max),a="number"==typeof n.countDirection?n.countDirection:1,i={threshold:{low:0,lowmid:o/4,mid:o/2,midhigh:o/1.25,high:o}},c={container:'<div class="char-counter-container"></div>',counter:'<div class="char-counter"></div>',low:'<span class="low counter-text"></span>',lowmid:'<span class="low-mid counter-text"></span>',mid:'<span class="mid counter-text"></span>',midhigh:'<span class="mid-high counter-text"></span>',high:'<span class="high counter-text"><span>',create:function(e){return t(e)}},s=n.separator.toString();s=s.length>1?" "+s+" ":s;var h=s+o+("string"==typeof n.text&&""!==n.text.trim()?" "+n.text:""),l=function(t){return t.substring(0,o)},d=function(t){return n.trim===!0?t.val().trim():t.val()},u=function(t){return d(t).length},p=function(t){t.val(l(d(t)))};return this.filter("input:text, textarea").each(function(){var e=t(this),r=c.create(c.container).attr("target-control-id",e.prop("id")),s=c.create(c.counter),l=c.create(c.low).css("color",n.colors.low),d=c.create(c.lowmid).css("color",n.colors.lowmid),m=c.create(c.mid).css("color",n.colors.mid),x=c.create(c.midhigh).css("color",n.colors.midhigh),f=c.create(c.high).css("color",n.colors.high),g=!0,w=0===a?o-u(e)+h:u(e)+h;switch(r.append(s.append(l.text(w))).width(e.width()),n.align){case 0:r.css("text-align","left");break;case 1:r.css("text-align","center");break;case 2:r.css("text-align","right")}e.keyup(function(t){var r=u(e),c=0===a?(0>o-r?0:o-r)+h:o>r?r+h:o+h,w={keyboardEvent:t,textEntry:e,length:r,maxLength:o};s.children().remove(),r<i.threshold.lowmid?(l.text(c),s.append(l),g=!0):r<i.threshold.mid?(d.text(c),s.append(d),g=!0):r<i.threshold.midhigh?(m.text(c),s.append(m),g=!0):r<i.threshold.high?(x.text(c),s.append(x),g=!0):(f.text(c),s.append(f),n.autoTruncate===!0&&p(e),g=!1),g===!0&&"function"==typeof n.offMaxChars?n.offMaxChars(w):g===!1&&"function"==typeof n.onMaxChars&&n.onMaxChars(w)}),r.insertAfter(e)}),this}}(jQuery);